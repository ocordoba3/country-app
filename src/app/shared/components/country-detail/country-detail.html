<article class="w-full h-fit grid mt-8 mb-8 md:mb-0">
  <h1 class="card-title text-2xl md:text-4xl px-4 md:px-6 mb-4 flex flex-wrap md:flex-nowrap">
    {{ country()?.name }} <span class="badge badge-info">{{ country()?.code }}</span>
  </h1>
  <h2 class="card-title text-lg md:text-xl px-4 md:px-6 mb-4 flex items-center gap-2">
    Capital:
    <span class="badge badge-soft badge-xl"> {{ country()?.capital | titlecase }}</span>
  </h2>
  <h2 class="italic text-sm md:text-base px-4 md:px-6 mb-8 flex items-center gap-2">
    Has
    {{ country()?.borders?.length || 0 | i18nPlural : bordersMap }} @if(country()?.borders?.length)
    { ({{ country()?.borders?.join(', ') }}) }
  </h2>
  <!-- Stats -->
  <div class="stats shadow grid grid-cols-1 md:grid-cols-3 !grid-flow-row !md:grid-flow-col">
    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg
          class="inline-block h-8 w-8 stroke-current"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            fill="currentColor"
            d="M21.89 7.172C22 8.433 22 10.006 22 12c0 4.134 0 6.455-.987 7.951L15.06 14zm-1.938 13.84L14 15.06l-6.828 6.83C8.433 22 10.006 22 12 22c4.134 0 6.456 0 7.952-.988"
          />
          <path
            fill="currentColor"
            fill-rule="evenodd"
            d="M12 2c4.714 0 7.071 0 8.535 1.464c.504.504.835 1.114 1.052 1.889L5.353 21.587c-.775-.217-1.385-.548-1.889-1.052C2 19.072 2 16.714 2 12s0-7.071 1.464-8.536C4.93 2 7.286 2 12 2M5.5 8.757c0 1.785 1.117 3.868 2.86 4.613c.406.173.874.173 1.28 0c1.743-.745 2.86-2.828 2.86-4.613C12.5 6.958 10.933 5.5 9 5.5S5.5 6.958 5.5 8.757"
            clip-rule="evenodd"
          />
          <path fill="currentColor" d="M10.5 9a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0" />
        </svg>
      </div>
      <div class="stat-title">Region</div>
      <div class="stat-value text-secondary">{{ country()?.region | titlecase }}</div>
    </div>

    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg
          class="inline-block h-8 w-8 stroke-current"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            fill="currentColor"
            d="M12 21.325q-.35 0-.7-.125t-.625-.375Q9.05 19.325 7.8 17.9t-2.087-2.762t-1.275-2.575T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 1.125-.437 2.363t-1.275 2.575T16.2 17.9t-2.875 2.925q-.275.25-.625.375t-.7.125M12 12q.825 0 1.413-.587T14 10t-.587-1.412T12 8t-1.412.588T10 10t.588 1.413T12 12"
          />
        </svg>
      </div>
      <div class="stat-title">Subregion</div>
      <div class="stat-value text-secondary">{{ country()?.subregion | titlecase }}</div>
    </div>

    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg
          class="inline-block h-8 w-8 stroke-current"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            fill="currentColor"
            d="M14 12.25a3.75 3.75 0 1 1 3.75-3.75A3.75 3.75 0 0 1 14 12.25m0-6a2.25 2.25 0 1 0 2.25 2.25A2.25 2.25 0 0 0 14 6.25m7 13a.76.76 0 0 1-.75-.75c0-1.95-1.06-3.25-6.25-3.25s-6.25 1.3-6.25 3.25a.75.75 0 0 1-1.5 0c0-4.75 5.43-4.75 7.75-4.75s7.75 0 7.75 4.75a.76.76 0 0 1-.75.75M8.32 13.06H8a3 3 0 1 1 .58-6a.75.75 0 1 1-.15 1.49a1.46 1.46 0 0 0-1.09.34a1.47 1.47 0 0 0-.54 1a1.49 1.49 0 0 0 1.35 1.64a1.53 1.53 0 0 0 .93-.22a.75.75 0 0 1 .79 1.28a3 3 0 0 1-1.55.47M3 18.5a.76.76 0 0 1-.75-.75c0-2.7.72-4.5 4.25-4.5a.75.75 0 0 1 0 1.5c-2.35 0-2.75.75-2.75 3a.76.76 0 0 1-.75.75"
          />
        </svg>
      </div>
      <div class="stat-title">Population</div>
      <div class="stat-value text-secondary">{{ country()?.population | number }}</div>
    </div>
  </div>

  <div class="stats shadow grid grid-cols-1 md:grid-cols-2 !grid-flow-row !md:grid-flow-col">
    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg
          class="inline-block h-8 w-8 stroke-current"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <path
            fill="currentColor"
            d="M20 11.75a.74.74 0 0 1-.45-.15L12 5.94L4.45 11.6a.75.75 0 0 1-.9-1.2l8-6a.75.75 0 0 1 .9 0l8 6a.75.75 0 0 1 .15 1a.74.74 0 0 1-.6.35"
          />
          <path
            fill="currentColor"
            d="M18 19.75H6a.76.76 0 0 1-.75-.75V9.5a.75.75 0 0 1 1.5 0v8.75h10.5V9.5a.75.75 0 0 1 1.5 0V19a.76.76 0 0 1-.75.75"
          />
          <path
            fill="currentColor"
            d="M14 19.75a.76.76 0 0 1-.75-.75v-6.25h-2.5V19a.75.75 0 0 1-1.5 0v-7a.76.76 0 0 1 .75-.75h4a.76.76 0 0 1 .75.75v7a.76.76 0 0 1-.75.75"
          />
        </svg>
      </div>
      <div class="stat-title">Area</div>
      <div class="stat-value text-secondary">{{ country()?.area | number }} km²</div>
    </div>

    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg
          class="inline-block h-8 w-8 stroke-current"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
        >
          <g
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
          >
            <path
              d="M3.85 8.62a4 4 0 0 1 4.78-4.77a4 4 0 0 1 6.74 0a4 4 0 0 1 4.78 4.78a4 4 0 0 1 0 6.74a4 4 0 0 1-4.77 4.78a4 4 0 0 1-6.75 0a4 4 0 0 1-4.78-4.77a4 4 0 0 1 0-6.76"
            />
            <path d="M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8m4 2V6" />
          </g>
        </svg>
      </div>
      <div class="stat-title">Currency</div>
      <div class="stat-value text-secondary">{{ currency() }}</div>
    </div>
  </div>
  <!-- Flag and details -->
  <div class="bg-base-100 w-full flex flex-wrap justify-between px-4 md:px-8">
    <div class="card w-full grid grid-cols-1 md:grid-cols-2 gap-16 h-fit">
      <div>
        <div class="rounded-xl grid grid-cols-2 gap-8 mt-8 flex-wrap mb-4">
          <h3 class="card-title text-xl">Flag</h3>
          @if(country()?.coatOfArms) {
          <h3 class="card-title text-xl">Coat of Arms</h3>
          }
        </div>
        <div class="rounded-xl grid grid-cols-2 gap-8 flex-wrap">
          <img [src]="country()?.flags?.png" alt="Country Flag" class="w-full rounded-xl" />
          @if(country()?.coatOfArms) {
          <img [src]="country()?.coatOfArms" alt="Country Coat of Arms" class="w-full" />
          }
        </div>
        @if(country()?.flags?.description){
        <p class="text-justify mt-4">
          {{ country()?.flags?.description }}
        </p>
        }
      </div>

      <div class="card w-full h-[400px] bg-secondary/5 flex items-center justify-center">
        @if (country()?.map; as mapUrl) {
        <div class="text-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="64"
            height="64"
            viewBox="0 0 24 24"
            class="mx-auto mb-4 text-primary"
          >
            <path
              fill="currentColor"
              d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5z"
            />
          </svg>
          <h3 class="text-lg font-semibold mb-2">View location of {{ country()?.name }}</h3>
          <p class="text-sm text-gray-600 mb-4">Click to open Google Maps</p>
          <a [href]="mapUrl" target="_blank" rel="noopener noreferrer" class="btn btn-primary">
            Open in Google Maps
          </a>
        </div>
        } @else {
        <h3 class="text-lg font-semibold mb-2">Map not available</h3>
        }
      </div>
    </div>
  </div>
</article>

<div class="fab">
  <!-- a focusable div with tabindex is necessary to work on all browsers. role="button" is necessary for accessibility -->
  <div tabindex="0" role="button" class="btn btn-lg btn-circle btn-info">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
      <g fill="none">
        <circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="1.5" />
        <path stroke="#fff" stroke-linecap="round" stroke-width="1.5" d="M12 17v-6" />
        <circle cx="1" cy="1" r="1" fill="#fff" transform="matrix(1 0 0 -1 11 9)" />
      </g>
    </svg>
  </div>

  <!-- close button should not be focusable so it can close the FAB when clicked. It's just a visual placeholder -->
  <div class="fab-close"><span class="btn btn-circle btn-lg btn-error">✕</span></div>

  <!-- buttons that show up when FAB is open -->
  <div class="bg-black/80 px-2 rounded-lg">
    Latitude
    <button class="btn btn-lg btn-circle">{{ country()?.latitude | number : '1.0-2' }}°</button>
  </div>
  <div class="bg-black/80 px-2 rounded-lg">
    Longitude
    <button class="btn btn-lg btn-circle">{{ country()?.longitude | number : '1.0-2' }}°</button>
  </div>
</div>
